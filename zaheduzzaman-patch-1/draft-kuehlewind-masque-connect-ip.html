<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>The CONNECT-IP method for proxying IP traffic</title>
<meta content="Mirja Kuehlewind" name="author">
<meta content="Magnus Westerlund" name="author">
<meta content="Marcus Ihlar" name="author">
<meta content="Zaheduzzaman Sarker" name="author">
<meta content="
       This draft specifies a new HTTP/3 method CONNECT-IP to proxy IP traffic.
CONNECT-IP can be used to convert a QUIC stream into a tunnel or initialise an
HTTP datagram flow to a forwarding proxy. Each stream or HTTP datagram flow can
be used separately to establish forwarding of an IP flow to potentially
different remote hosts. To request forwarding, a client connects to a proxy
server by initiating a HTTP/3 connection and sends a CONNECT-IP indicating the
address of the target server. The proxy server then forwards payload received on
that stream or in an HTTP datagram with a certain flow ID to the target server
after adding an IP header to each frame received. 
    " name="description">
<meta content="xml2rfc 3.2.1" name="generator">
<meta content="draft-kuehlewind-masque-connect-ip-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.2.1
    Python 3.8.5
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.5.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 45.2.0
    six 1.14.0
-->
<link href="draft-kuehlewind-masque-connect-ip.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@import url('https://martinthomson.github.io/i-d-template/fonts.css');

html {
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --small-font-size: 14.5px;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
#title {
  padding: 1em 0 0.2em;
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1, h2, h3 {
  font-size: 22px;
  line-height: 26px;
}
h4, h5, h6 {
  font-size: 18px;
  line-height: 22px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p, #abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 18px;
  line-height: 24px;
}
p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
dd.break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px 'Oxygen Mono', monospace;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  pre {
    display: inline-block;
    overflow-x: auto;
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  pre + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
  table {
    display: inline-block;
    overflow-x: auto;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
tr:nth-child(2n) > td {
  background-color: var(--background-color);
}
tr:nth-child(2n+1) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n+1) > td {
  background-color: var(--background-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  visibility: hidden;
  user-select: none;
}
a.pilcrow[href] { color: #ddd; }
a.pilcrow[href]:hover { text-decoration: none; }
@media screen {
  :hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 500px) {
  .index ul {
    column-count: 2;
    column-gap: 20px;
  }
  .index ul ul {
    column-count: 1;
    column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul p, #toc ul li {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table .text-left, table .text-left {
  text-align: left;
}
table .text-center, table .text-center {
  text-align: center;
}
table .text-right, table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
</style>

</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">CONNECT-IP method</td>
<td class="right">November 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kuehlewind, et al.</td>
<td class="center">Expires 6 May 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">MASQUE</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kuehlewind-masque-connect-ip-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-11-02" class="published">2 November 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-05-06">6 May 2021</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Kuehlewind</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">M. Westerlund</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">M. Ihlar</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">Z. Sarker</div>
<div class="org">Ericsson</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">The CONNECT-IP method for proxying IP traffic</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This draft specifies a new HTTP/3 method CONNECT-IP to proxy IP traffic.
CONNECT-IP can be used to convert a QUIC stream into a tunnel or initialise an
HTTP datagram flow to a forwarding proxy. Each stream or HTTP datagram flow can
be used separately to establish forwarding of an IP flow to potentially
different remote hosts. To request forwarding, a client connects to a proxy
server by initiating a HTTP/3 connection and sends a CONNECT-IP indicating the
address of the target server. The proxy server then forwards payload received on
that stream or in an HTTP datagram with a certain flow ID to the target server
after adding an IP header to each frame received.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
  MASQUE Working Group mailing list (masque@ietf.org),
  which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/masque/">https://mailarchive.ietf.org/arch/browse/masque/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
  <span><a href="https://github.com/mirjak/draft-kuehlewind-masque-connect-ip">https://github.com/mirjak/draft-kuehlewind-masque-connect-ip</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 6 May 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-definitions" class="xref">Definitions</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-motivation-of-ip-flow-model" class="xref">Motivation of IP flow model</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-the-connect-ip-method" class="xref">The CONNECT-IP method</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-stream-based-mode" class="xref">Stream-based mode</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-datagram-based-mode" class="xref">Datagram-based mode</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-ip-protocol-header-for-conn" class="xref">IP-Protocol Header for CONNECT-IP</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-conn-id-header-for-connect-" class="xref">Conn-ID Header for CONNECT-IP</a><a href="#section-toc.1-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-client-behavior" class="xref">Client behavior</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-masque-server-behavior" class="xref">MASQUE server behavior</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-error-handling" class="xref">Error handling</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-ip-address-selection-and-na" class="xref">IP address selection and NAT</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-constructing-the-ip-header" class="xref">Constructing the IP header</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-receiving-an-ip-packet" class="xref">Receiving an IP packet</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-masque-signaling" class="xref">MASQUE signaling</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-config-file" class="xref">Config file</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-ecn" class="xref">ECN</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-icmp-handling" class="xref">ICMP handling</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-examples" class="xref">Examples</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-http-method" class="xref">HTTP Method</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-http-header" class="xref">HTTP Header</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref"></a><a href="#name-acknowledgments" class="xref">Acknowledgments</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref"></a><a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref"></a><a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref"></a><a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document specifies the CONNECT-IP method for IPv4 <span>[<a href="#RFC0791" class="xref">RFC0791</a>]</span> and IPv6
<span>[<a href="#RFC8200" class="xref">RFC8200</a>]</span> flows when they are proxied according to the MASQUE proposal over
HTTP/3.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The approach taken in this paper does not send the IP header as part of the
payload between the client and proxy in order to reduce overhead. The target IP
address and other IP flow related information is provided by the client as part
of the CONNCT-IP request. The sources address is selected by the proxy as
further discussed below. Other information that might be needed to construct the
IP header or to inform the client about information from received IP packets can
be signalled separately.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This proposal is based on the analysis provided in
<span>[<a href="#I-D.westerlund-masque-transport-issues" class="xref">I-D.westerlund-masque-transport-issues</a>]</span> indicating that most information in
the IP header is either IP flow related or can or even should be provided by the
proxy as the IP communication endpoint without the need for input from the client. The
only information identified that requires client interaction is ECN <span>[<a href="#RFC3168" class="xref">RFC3168</a>]</span>
and ICMP <span>[<a href="#RFC0792" class="xref">RFC0792</a>]</span> <span>[<a href="#RFC4443" class="xref">RFC4443</a>]</span> handling. This document proposes an event-based
handling for both, which may not provide unambiguous mapping to one specific IP
packet that triggered the event but trades this off for lower overhead.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This document uses an IP flow definition that is tighter than just source and
destination address of the IP packet. To reduce the overhead a number of IP
header field values that are static in the context of an upper layer protocol
connection, e.g. when UDP or TCP are used, are associated with an MASQUE
IP flow at creation. These fields
include the Protocol (IPv4) / Next Header (IPv6), IPv6 flow label, Diffserv Code
Point (DSCP), TTL / Hop Limit, where a default value or locally generated value
based on the CONNECT-IP context is sufficient. Signalling of other dedicated
values may be desired in certain deployments, e.g for DCSP <span>[<a href="#RFC2474" class="xref">RFC2474</a>]</span>.
However, DSCP is in any case a challenge
due to local domain dependency of the used DSCP values and the forwarding
behavior and traffic treatment they represent. To address potential future DSCP use
cases or other future use cases that may require additional signalling e.g. based
on potentially new IPv6 extension headers or destination header options <span>[<a href="#RFC8200" class="xref">RFC8200</a>]</span>
it must be ensured that there is room for future extensions in the signalling proposed.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">The CONNECT-IP method establishes an outgoing IP flow, from the MASQUE server's
external address to the target server's address specified by the client. The method also
enable reception and relaying of the reverse IP flow from the target address to
the MASQUE server to ensure that return traffic can be received by the client.
This specification does support forwarding on incoming traffic to one of the 
clients that have an active QUIC tunnel connection with the proxy if no
active mapping have previously been created based on an IP-CONNECT request.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">Following the points above, this document assume that usually one upper-layer end-to-end connection
is associated to one CONNECT-IP request/one tunnelling association. While it would be
possible for a client to use the same tunnelling association for multiple 
end-to-end connections to the same target server, as long as they all require the same
Protocol (IPv4) / Next Header (IPv6) value, this would lead to the use of the same flow
ID for all connections and complicate the use of ECN as feedback cannot be associated
with a single packet/connection. As such this is not recommended for connection-oriented 
transmissions. Alternatively, the proposed approach in this document could be extended
to support per-packet signalling in HTTP datagrams and DATA frames on streams to
address this restriction, however, this would increase per-packet overhead and design
decisions in this document where taken in order minimise byte overhead.<a href="#section-1-6" class="pilcrow">¶</a></p>
<div id="definitions">
<section id="section-1.1">
        <h3 id="name-definitions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-1.1-1.1">Proxy: This document uses proxy as synonym for the MASQUE Server
or an HTTP proxy, depending on context.<a href="#section-1.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-1.2">Client: The endpoint initiating a MASQUE tunnel and IP relaying
with the proxy.<a href="#section-1.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-1.3">Target host: A remote endpoint the client wishes to establish
bi-directional communication with via tunnelling over the proxy.<a href="#section-1.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-1.4">IP proxying: A proxy forwarding IP payloads to a target for an IP
flow. Data is decapsulate at the proxy and amended by a IP header
before forwarding to the target. Packet boundaries need to be
preserved or signalled between the client and proxy.<a href="#section-1.1-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-1.5">IP flow: A flow of IP packets between two hosts as identified by
their IP addresses, and where all the packets share some
properties. These properties include source/destination address,
protocol / next header field, flow label (IPv6 only), and DSCP
per direction.<a href="#section-1.1-1.5" class="pilcrow">¶</a>
</li>
        </ul>
<span id="name-the-nodes-and-their-address"></span><div id="fig-node-model">
<figure id="figure-1">
          <div class="artwork art-text alignLeft" id="section-1.1-2.1">
<pre>
Address = IP address

                     Target Address --+
                                       \
+--------+           +--------+         \ +--------+
|        |  Path #1  |        | Path #2  V|        |
| Client |&lt;---------&gt;|  Proxy |&lt;---------&gt;| Target |
|        |          ^|        |^          |        |
+--------+         / +--------+ \         +--------+
                  /              \
                 /                +-- Proxy's external address
                /
               +-- Proxy's service address
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-the-nodes-and-their-address" class="selfRef">The nodes and their addresses</a>
          </figcaption></figure>
</div>
<p id="section-1.1-3"><a href="#fig-node-model" class="xref">Figure 1</a> provides an overview figure of the involved nodes,
i.e. client, proxy, and target host. There are also two network paths.  Path #1
is the client to proxy path, where IP proxying is provided over an HTTP/3
session, usually over QUIC, to tunnel IP flow(s).  Path #2 is the path between
the proxy and the target.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">The client will use the proxy's service address to establish a transport
connection on which to request IP proxying using HTTP/3 CONNECT-IP.  The proxy
will then relay the client's IP flows to the target host.  The IP header from
the proxy to the target carries the proxy's external address as source address
and the target's address as destination address.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="motivation-of-ip-flow-model">
<section id="section-1.2">
        <h3 id="name-motivation-of-ip-flow-model">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-motivation-of-ip-flow-model" class="section-name selfRef">Motivation of IP flow model</a>
        </h3>
<p id="section-1.2-1">The chose IP flow model is selected due to several advantages:<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-2.1">Shared functionality with CONNECT-UDP: The UDP flow proxying functionality
of CONNECT-UDP will need to establish, store and process the same IP header
related fields and state. So this can be accomplished by simply removing the
UDP specific processing of packets.<a href="#section-1.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-2.2">CONNECT-IP can establish a new IP flow in 0-RTT: No network releated
latencies in establishing new flow.<a href="#section-1.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-2.3">Minimized per packet overhead: The per packet overhead is reduced to basic
framing of the IP payload for each IP packet and flow identifiers.<a href="#section-1.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-3">Disadvantages of this model are the following:<a href="#section-1.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-4.1">Client server focused solution: Accepting non-solicited traffic is
challenging and require MASQUE server to client signalling.<a href="#section-1.2-4.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-5">Discussion: This IP flow model appears less sutiable if one targets network
proxying or running server functionality on the client side. However, as has
been identified this functionalit will be required if one intend to support
CONNECT-UDP. Thus, a potential long term solution is to have these as two
different modes for how CONNECT-IP operates. If this other mode is tunneling the
complete IP header over the MASQUE connection, then other properties are
achieved.  It will also put other requirements on the MASQUE server related to
IP router functionality, source address validation, and possibly network adderss
translation.<a href="#section-1.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connect-ip-method">
<section id="section-2">
      <h2 id="name-the-connect-ip-method">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-the-connect-ip-method" class="section-name selfRef">The CONNECT-IP method</a>
      </h2>
<p id="section-2-1">This document defines a new HTTP/3 <span>[<a href="#I-D.ietf-quic-http" class="xref">I-D.ietf-quic-http</a>]</span> method CONNECT-IP to
convert streams into tunnels or initialise HTTP datagram flows
<span>[<a href="#I-D.schinazi-quic-h3-datagram" class="xref">I-D.schinazi-quic-h3-datagram</a>]</span> to a forwarding proxy.  Each stream can be
used separately to establish forwarding of one connection to potentially
different remote hosts. Unlike the HTTP CONNECT method, CONNECT-IP
does not request the forwarding proxy to establish an TCP connection to the
remote target host. Instead the tunnel payload will be forwarded right on top of
the IP layer, meaning the forwarding proxy has to identify messages boundaries
and then adds an IP header to each message before forwarding (see section
<a href="#server" class="xref">Section 4</a>).<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">This document specifies CONNECT-IP only for HTTP/3 following the same semantics
as the CONNECT method. As such a CONNECT-IP request MUST be constructed as
follows:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">The ":method" pseudo-header field is set to "CONNECT-IP"<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.2">The ":scheme" and ":path" pseudo-header fields are omitted<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.3">The ":authority" pseudo-header field contains the host and port to
connect to (equivalent to the authority-form of the request-target
of CONNECT requests; see Section 3.2.3 of <span>[<a href="#I-D.ietf-httpbis-messaging" class="xref">I-D.ietf-httpbis-messaging</a>]</span>)<a href="#section-2-3.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-4">A CONNECT request that does not conform to these restrictions is malformed; see
Section 4.1.3 of <span>[<a href="#I-D.ietf-quic-http" class="xref">I-D.ietf-quic-http</a>]</span>.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">The forwarding stays active as long as the respective stream is open. Forwarding
can be either be realised by sending data on that stream together with an
indication of message length (see <a href="#stream" class="xref">Section 2.1</a>) or use of HTTP/3 datagrams
<span>[<a href="#I-D.schinazi-quic-h3-datagram" class="xref">I-D.schinazi-quic-h3-datagram</a>]</span> where the payload of one frame is mapped to
one message (see <a href="#datagram" class="xref">Section 2.2</a>).<a href="#section-2-5" class="pilcrow">¶</a></p>
<div id="stream">
<section id="section-2.1">
        <h3 id="name-stream-based-mode">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-stream-based-mode" class="section-name selfRef">Stream-based mode</a>
        </h3>
<p id="section-2.1-1">Once the CONNECT-IP method has completed, only DATA frames are permitted to be
sent on that stream. Extension frames MAY be used if specifically permitted by
the definition of the extension.  Receipt of any other known frame type MUST be
treated as a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">Each HTTP DATA frames MUST to contain the payload of one IP packet.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">Stream based mode provides in-order and reliable delivery but may introduce Head
of Line (HoL) Blocking if independent messages are send in the IP payload.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="datagram">
<section id="section-2.2">
        <h3 id="name-datagram-based-mode">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-datagram-based-mode" class="section-name selfRef">Datagram-based mode</a>
        </h3>
<p id="section-2.2-1">The client can, in addition to stream mode, request support of datagram mode
using HTTP/3 datagram <span>[<a href="#I-D.schinazi-quic-h3-datagram" class="xref">I-D.schinazi-quic-h3-datagram</a>]</span> to forward IP
payload.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">To request datagram support the client adds an Datagram-Flow-Id Header to the
CONNECT-IP request as specified for CONNECT-UDP in
<span>[<a href="#I-D.schinazi-masque-connect-udp" class="xref">I-D.schinazi-masque-connect-udp</a>]</span>.  Datagram mode MUST only be requested when
the QUIC datagram extension <span>[<a href="#I-D.ietf-quic-datagram" class="xref">I-D.ietf-quic-datagram</a>]</span> was
successfully negotiated during the QUIC handshake.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">Datagram mode provides un-order and unreliable delivery. In theory both, stream
as well as datagram mode, can be used in parallel, however, for most
transmission is is expected to only use one.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">While IP packet send in stream based mode, only have to respect the end-to-end MTU
between the client and the target server, packet send in datagram mode are further
restricted by the QUIC packet size of the QUIC tunnel and any overhead within
the QUIC packet. The proxy should provide MTU and overhead information to the client.
The client MUST take this overhead into account when indicating the MTU to the
application.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ip-protocol-header-for-connect-ip">
<section id="section-2.3">
        <h3 id="name-ip-protocol-header-for-conn">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-ip-protocol-header-for-conn" class="section-name selfRef">IP-Protocol Header for CONNECT-IP</a>
        </h3>
<p id="section-2.3-1">In order to construct the IP header the MASQUE server need to fill the "Protocol" field
in the IPv4 header or "Next header" field in the IPv6 header. As the IP payload is otherwise
mostly opaque to the MASQUE forwarding server, this information has to be provided by
the client for each CONNECT-IP request. Therefore this document define a new header
field that is mandatory to use with CONNECT-IP called "IP-Protocol".<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">IP-Protocool is a Item Structured Header <span>[<a href="#I-D.ietf-httpbis-header-structure" class="xref">I-D.ietf-httpbis-header-structure</a>]</span>.
Its value MUST be a Byte Sequence. Its ABNF is:<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.3-3">
<pre>
  IP-Protocol = sf-binary
</pre><a href="#section-2.3-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="conn-id-header-for-connect-ip">
<section id="section-2.4">
        <h3 id="name-conn-id-header-for-connect-">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-conn-id-header-for-connect-" class="section-name selfRef">Conn-ID Header for CONNECT-IP</a>
        </h3>
<p id="section-2.4-1">This document further defines a new header field to be used with CONNECT-IP
"Conn-ID".  The Conn-ID HTTP header field indicates the value, offset, and
length of a field in the IP payload that can be used by the MASQUE as a
connection identifier in addition to the IP address tuple when multiple
connections are proxied to the same target server.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">Conn-ID is a Item Structured Header <span>[<a href="#I-D.ietf-httpbis-header-structure" class="xref">I-D.ietf-httpbis-header-structure</a>]</span>.
Its value MUST be a Byte Sequence. Its ABNF is:<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.4-3">
<pre>
  Conn-ID = sf-binary
</pre><a href="#section-2.4-3" class="pilcrow">¶</a>
</div>
<p id="section-2.4-4">The following parameters are defined:<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4-5.1">A parameter whose name is "offset", and whose value is an Integer indicating
the offset of the identifier field starting from the beginning of a datagram
or HTTP frame on the forwarding stream.<a href="#section-2.4-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.4-5.2">A parameter whose name is length, and whose value is an Integer indication the
length of the identifier field starting from the offset.<a href="#section-2.4-5.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.4-6">Both parameter MUST be present and the header MUST be ignored if these parameter
are not present.<a href="#section-2.4-6" class="pilcrow">¶</a></p>
<p id="section-2.4-7">This function can be used to e.g. indicate the source port field in the IP
payload when containing an TCP packet.<a href="#section-2.4-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="client">
<section id="section-3">
      <h2 id="name-client-behavior">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-client-behavior" class="section-name selfRef">Client behavior</a>
      </h2>
<p id="section-3-1">To request IP proxying, the client sends a CONNECT-IP request to the forwarding
proxy indicating the target host and port in the ":authority" pseudo-header
field. The host portion is either an IP literal encapsulated within square
brackets, an IPv4 address in dotted-decimal form, or a registered name.
Different to the TCP-based CONNECT, CONNECT-IP does not trigger a
connection establishment process from the proxy to the target host. Therefore,
the client does not need to wait for an HTTP response in order to send
forwarding data.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Forwarding data can either be send directly on the same HTTP stream as the
CONNECT-IP request (see Section <a href="#stream" class="xref">Section 2.1</a>), or an HTTP datagram
encapsulated in a QUIC datagram can be send(see Section <a href="#datagram" class="xref">Section 2.2</a>),
even in the same QUIC packet. To request use of the datagram mode,
the CONNECT-IP request MUST indicate the datagram flow ID in the
Datagram-Flow-Id Header.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">QUESTION: datagram flow IDs are allocated by a flow id allocation service at the
server in <span>[<a href="#I-D.schinazi-quic-h3-datagram" class="xref">I-D.schinazi-quic-h3-datagram</a>]</span>. However, with CONNECT-IP you can
always send your first message directly on the same stream right after the
CONNECT-IP request and sever could provide you a flow ID together with a "2xx"
response to the CONNECT-IP request. Wouldn't that be easier and faster?<a href="#section-3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server">
<section id="section-4">
      <h2 id="name-masque-server-behavior">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-masque-server-behavior" class="section-name selfRef">MASQUE server behavior</a>
      </h2>
<p id="section-4-1">A MASQUE server that receives an IP-CONNECT request, opens a raw socket and
creates state to map an connection identifier, which might be a tuple, to a
target IP address. Once this is successfully established, the proxy sends a
HEADERS frame containing a 2xx series status code to the client. To indicate
support of datagram mode, if requested by the client, the MASQUE server reflects
the Datagram-Flow-Id Header from the client's request on the HTTP response.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">All DATA frames received on that stream as well as all HTPP/s datagrams with the
specified Datagram-flow-ID are forwarded to the target server by adding an IP
header (see section <a href="#IP-header" class="xref">Section 4.3</a> below) and sending the packet on the respective raw socket.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">IP packets received from the target server are mapped to an active
forwarding connection and its payload is then respectively forwarded in an DATA
frame or HTTP datagram to the client (see section <a href="#receiving" class="xref">Section 4.4</a> below).<a href="#section-4-3" class="pilcrow">¶</a></p>
<div id="error-handling">
<section id="section-4.1">
        <h3 id="name-error-handling">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-error-handling" class="section-name selfRef">Error handling</a>
        </h3>
<p id="section-4.1-1">TBD (e.g. out of IP address, conn-id collision)<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ip-address-selection-and-nat">
<section id="section-4.2">
        <h3 id="name-ip-address-selection-and-na">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-ip-address-selection-and-na" class="section-name selfRef">IP address selection and NAT</a>
        </h3>
<p id="section-4.2-1">As MASQUE server adds the IP header when sending the IP payload towards the
target server, it also select an source IP address from its pool of IP address
that are routed to the MASQUE server.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">If no additional information about a payload field that can be used as an
identifier based on Conn-ID header is provided by the client, the masque server
uses the source/destination address 2-tuple in order to map an incoming IP
packet to an active forwarding connection. As such the MASQUE proxy MUST select
a source IP address that leads to a unique tuple. The same IP address can be
used for different client when those client connect to different target servers,
however, this also means that potentially multiple IP address are used for the
same client when multiple connection to one target server are needed. This can
be problematic if the source address is used by the target server as an
identifier.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">If the Conn-ID header is provided the MASQUE server should use that field as an
connection identifier together with source and destination address, as a
3-tuple. In this case it is recommended to use a stable IP address for each
client, while the same IP address might still be used for multiple clients, if
not indicated differently by the client in the configuration file. Note that if
the same IP address is used for multiple clients, this can still lead to an
identifier collision and the IP-CONNECT request MUST be reject if such a
collision is detect.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IP-header">
<section id="section-4.3">
        <h3 id="name-constructing-the-ip-header">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-constructing-the-ip-header" class="section-name selfRef">Constructing the IP header</a>
        </h3>
<p id="section-4.3-1">To retrieve the source and destination address the proxy looks up the
datagram flow ID or stream identifier. The IP version, flow
label, DiffServ codepoint (DSCP), and hop limit/TTL is selected by the proxy.
The IPv4 Protocol or IPv6 Next Header field is set based on the information
provided by the IP-Protocol header in the CONNECT-IP request.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">MASQUE server MUST set the Don't Fragment (DF) flag in the IPv4 header. Payload
that does not fit into one IP packet MUST be dropped. An dropping
indication should be provided to the client. Further the MASQUE
server should provide MTU information.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">The ECN field is by default set to non-ECN capable transport (non-ECT).
Further ECN handling is described in Section <a href="#ECN" class="xref">Section 5.2</a>.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="receiving">
<section id="section-4.4">
        <h3 id="name-receiving-an-ip-packet">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-receiving-an-ip-packet" class="section-name selfRef">Receiving an IP packet</a>
        </h3>
<p id="section-4.4-1">When the MASQUE proxy receives an incoming IP packet, it checks if the source
and destination IP maps to an active forwarding connection. If one or more
mappings exists, it further checks if this mapping contains additional
identifier information and if these map as well, the IP payload is forwarded
to the client . If no active mapping is found,
the IP packet is discarded.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">The masque server should use the same
forwarding mode as used by the client.  If both modes, datagram and stream
based, are used, it is recommended to the same mode as most recently used by the
client or datagram mode as default. Alternatively, the client might indicate a
preference in the configuration file.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="masque-signaling">
<section id="section-5">
      <h2 id="name-masque-signaling">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-masque-signaling" class="section-name selfRef">MASQUE signaling</a>
      </h2>
<p id="section-5-1">One stream of the underlying QUIC connection is used as a signalling channel
between the client and proxy. Both the client and the masque server can send or
request an JSON <span>[<a href="#RFC7159" class="xref">RFC7159</a>]</span> configuration file by sending an HTTP POST or GET to
"/.well-known/masque/config". Further the masque server can PUSH status updates
about certain forwarding streams or datagram flows, e.g. contain ECN <span>[<a href="#RFC3168" class="xref">RFC3168</a>]</span>
counters or the outside facing IP address used for this connection, to
"/.well-known/masque/&lt;id&gt;".<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Note: Alternative approach would be to use HTTP headers with IP-CONNECT for
initial negotiation and new HTTP frame format(s) to provide per-packet
information (e.g ECN) or event-based information (e.g. ICMP).<a href="#section-5-2" class="pilcrow">¶</a></p>
<div id="config-file">
<section id="section-5.1">
        <h3 id="name-config-file">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-config-file" class="section-name selfRef">Config file</a>
        </h3>
<p id="section-5.1-1">TBD (indicate IP address handling, forwarding mode preference, MTU...)<a href="#section-5.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ECN">
<section id="section-5.2">
        <h3 id="name-ecn">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-ecn" class="section-name selfRef">ECN</a>
        </h3>
<p id="section-5.2-1">ECN requires coordination with the e2e communication points as it should only be
used if the endpoints are also capable and willing to signal congestion
notifications to the other end and react accordingly if a congestion
notification is received. In addition, the proxy needs to inform the client of a
congestion notification (IP CE codepoint) was observed in any IP header of a
received packet from the target server. This can be realised that maintaining an
CE counter and send an updated JSON stream file if the counter changes.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">Further, client must indicate to the proxy for each forwarding flow/stream if
the ECT(0) or ECT(1) codepoint should be set. The client can update this during
the lifetime of a forwarding connection, however, there is no guarantee which
packet will be forwarded with the updated information or the old information as
QUIC datagrams may be delivered out of order. If the IP payload is e.g. carrying
TCP, today, ECN is only used after the handshake. But if not all data packets
after the handshake are immediately ECT marked, this should not have a huge
impact.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">It may be needed for the endpoint to validate ECN usage on the path. In this
case validation can either be done by the proxy independently or the proxy has
to provide not only the number or received observed CE markings but also the
number of sent and other received markings. This need further discussion.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ICMP">
<section id="section-5.3">
        <h3 id="name-icmp-handling">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-icmp-handling" class="section-name selfRef">ICMP handling</a>
        </h3>
<p id="section-5.3-1">TBD<a href="#section-5.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="examples">
<section id="section-6">
      <h2 id="name-examples">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<p id="section-6-1">TBD<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security considerations</a>
      </h2>
<p id="section-7-1">This document does currently not discuss risks that are generic to the MASQUE approach.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Any CONNECT-IP specific risks need further consideration in future, especially
when the handling of IP functions is defined in more detail.<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA considerations</a>
      </h2>
<div id="iana-method">
<section id="section-8.1">
        <h3 id="name-http-method">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-http-method" class="section-name selfRef">HTTP Method</a>
        </h3>
<p id="section-8.1-1">This document (if published as RFC) registers "CONNECT-IP" in the HTTP Method Registry
maintained at &lt;<span><a href="https://www.iana.org/assignments/http-methods">https://www.iana.org/assignments/http-methods</a></span>&gt;.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1-2">
<pre>
  +--------------+------+------------+---------------+
  | Method Name  | Safe | Idempotent |   Reference   |
  +--------------+------+------------+---------------+
  | CONNECT-QUIC |  no  |     no     | This document |
  +--------------+------+------------+---------------+
</pre><a href="#section-8.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="iana-header">
<section id="section-8.2">
        <h3 id="name-http-header">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-http-header" class="section-name selfRef">HTTP Header</a>
        </h3>
<p id="section-8.2-1">This document (if published as RFC) registers the "Conn-Id" header in the
"Permanent Message Header Field Names" registry maintained at
&lt;<span><a href="https://www.iana.org/assignments/message-headers">https://www.iana.org/assignments/message-headers</a></span>&gt;.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2-2">
<pre>
  +-------------------+----------+--------+---------------+
  | Header Field Name | Protocol | Status |   Reference   |
  +-------------------+----------+--------+---------------+
  | Conn-Id           |   http   |  exp   | This document |
  +-------------------+----------+--------+---------------+
</pre><a href="#section-8.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="section-9">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
    </h2>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-httpbis-header-structure">[I-D.ietf-httpbis-header-structure]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor"> and P. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-header-structure-19</span>, <time datetime="2020-06-03" class="refDate">3 June 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-header-structure-19.txt">http://www.ietf.org/internet-drafts/draft-ietf-httpbis-header-structure-19.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-httpbis-messaging">[I-D.ietf-httpbis-messaging]</dt>
        <dd>
<span class="refAuthor">Fielding, R.</span><span class="refAuthor">, Nottingham, M.</span><span class="refAuthor">, and J. Reschke</span>, <span class="refTitle">"HTTP/1.1 Messaging"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-messaging-12</span>, <time datetime="2020-10-02" class="refDate">2 October 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-messaging-12.txt">http://www.ietf.org/internet-drafts/draft-ietf-httpbis-messaging-12.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-datagram">[I-D.ietf-quic-datagram]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span><span class="refAuthor">, Kinnear, E.</span><span class="refAuthor">, and D. Schinazi</span>, <span class="refTitle">"An Unreliable Datagram Extension to QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-datagram-01</span>, <time datetime="2020-08-24" class="refDate">24 August 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-datagram-01.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-datagram-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-http">[I-D.ietf-quic-http]</dt>
        <dd>
<span class="refAuthor">Bishop, M.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 3 (HTTP/3)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-http-32</span>, <time datetime="2020-10-20" class="refDate">20 October 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-http-32.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-http-32.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.schinazi-masque-connect-udp">[I-D.schinazi-masque-connect-udp]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"The CONNECT-UDP HTTP Method"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-schinazi-masque-connect-udp-00</span>, <time datetime="2020-04-16" class="refDate">16 April 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-schinazi-masque-connect-udp-00.txt">http://www.ietf.org/internet-drafts/draft-schinazi-masque-connect-udp-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.schinazi-quic-h3-datagram">[I-D.schinazi-quic-h3-datagram]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"Using QUIC Datagrams with HTTP/3"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-schinazi-quic-h3-datagram-05</span>, <time datetime="2020-10-12" class="refDate">12 October 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-schinazi-quic-h3-datagram-05.txt">http://www.ietf.org/internet-drafts/draft-schinazi-quic-h3-datagram-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC0791">[RFC0791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 791</span>, <span class="seriesInfo">DOI 10.17487/RFC0791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3168">[RFC3168]</dt>
        <dd>
<span class="refAuthor">Ramakrishnan, K.</span><span class="refAuthor">, Floyd, S.</span><span class="refAuthor">, and D. Black</span>, <span class="refTitle">"The Addition of Explicit Congestion Notification (ECN) to IP"</span>, <span class="seriesInfo">RFC 3168</span>, <span class="seriesInfo">DOI 10.17487/RFC3168</span>, <time datetime="2001-09" class="refDate">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3168">https://www.rfc-editor.org/info/rfc3168</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7159">[RFC7159]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">RFC 7159</span>, <span class="seriesInfo">DOI 10.17487/RFC7159</span>, <time datetime="2014-03" class="refDate">March 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7159">https://www.rfc-editor.org/info/rfc7159</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
      <dd>
<span class="refAuthor">Deering, S.</span><span class="refAuthor"> and R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.westerlund-masque-transport-issues">[I-D.westerlund-masque-transport-issues]</dt>
        <dd>
<span class="refAuthor">Westerlund, M.</span><span class="refAuthor">, Ihlar, M.</span><span class="refAuthor">, Sarker, Z.</span><span class="refAuthor">, and M. Kuehlewind</span>, <span class="refTitle">"Transport Considerations for IP and UDP Proxying in MASQUE"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-westerlund-masque-transport-issues-00</span>, <time datetime="2020-07-10" class="refDate">10 July 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-westerlund-masque-transport-issues-00.txt">http://www.ietf.org/internet-drafts/draft-westerlund-masque-transport-issues-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC0792">[RFC0792]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Control Message Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 792</span>, <span class="seriesInfo">DOI 10.17487/RFC0792</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc792">https://www.rfc-editor.org/info/rfc792</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2474">[RFC2474]</dt>
        <dd>
<span class="refAuthor">Nichols, K.</span><span class="refAuthor">, Blake, S.</span><span class="refAuthor">, Baker, F.</span><span class="refAuthor">, and D. Black</span>, <span class="refTitle">"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"</span>, <span class="seriesInfo">RFC 2474</span>, <span class="seriesInfo">DOI 10.17487/RFC2474</span>, <time datetime="1998-12" class="refDate">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2474">https://www.rfc-editor.org/info/rfc2474</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4443">[RFC4443]</dt>
      <dd>
<span class="refAuthor">Conta, A.</span><span class="refAuthor">, Deering, S.</span><span class="refAuthor">, and M. Gupta, Ed.</span>, <span class="refTitle">"Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 89</span>, <span class="seriesInfo">RFC 4443</span>, <span class="seriesInfo">DOI 10.17487/RFC4443</span>, <time datetime="2006-03" class="refDate">March 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4443">https://www.rfc-editor.org/info/rfc4443</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kuehlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Magnus Westerlund</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:magnus.westerlund@ericsson.com" class="email">magnus.westerlund@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Marcus Ihlar</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:marcus.ihlar@ericsson.com" class="email">marcus.ihlar@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zaheduzzaman Sarker</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zaheduzzaman.sarker@ericsson.com" class="email">zaheduzzaman.sarker@ericsson.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
